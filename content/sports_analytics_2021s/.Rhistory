length(d)
size(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
tail(d)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home Team", "Away Team", Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
d <- read.csv("nfl.csv") %>% select("Date", "Home Team", "Away Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d)
length(d)
nrow(d)
? rename
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close") %>% rename("a")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close") %>% rename("a","a","a","a","a","a","a","a","a","a")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close") %>% rename("a","a","a","a","a","a","a","a","a","a")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d,8)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d,2,8)
length(d)
nrow(d)
? head
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
d[1:8,]
head(d,8)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
d[1:30,]
head(d,8)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d,15)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
d[16:31,]
head(d,15)
length(d)
nrow(d)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Playoff.Game.", "Home.Line.Open",  "Home.Line.Close", "Away.Line.Open", "Away.Line.Close")
head(d,15)
colnames(d)
d %>% rename(Date = "date")
d
colnames(d)
d %>% rename(Date = "date")
colnames(d)
d <- d %>% rename(Date = "date")
colnames(d)
d <- d %>% rename(Date = date)
colnames(d)
d <- d %>% rename(Date = date)
d <- d %>% rename(Date = d)
colnames(d)
d <- d %>% rename(Date = e)
d <- d %>% rename(Date = s)
colnames(d)
d <- d %>% rename(Date = "s")
rlang::last_error()
colnames(d)
colnames(d) <- c("d","d","d","d","d","d","d","d","d")
d
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Away.Line.Open", "Home.Line.Close", "Away.Line.Close")
colnames(d) <- c("date","home.team","away.team","HS","AS","HLO","HLC","ALO","ALC")
head(d,15)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Away.Line.Open", "Home.Line.Close", "Away.Line.Close")
colnames(d) <- c("date","home.team","away.team","HS","AS","HLO","ALO","HLC","ALC")
head(d,15)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","HS","AS","HLO", "HLC")
head(d,15)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
head(d,15)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
head(d,8)
? filter
?top_n
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
d %>% top_n(4)
#head(d,4)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
d %>% top_n(4, wt=date)
#head(d,4)
? mutate
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e %>% select(home.team)
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e %>% select(home.team) <- c("Browns","Bills","Chargers","Eagles")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
e[,"away.team"] <- c("Ravens","Steelers","Falcons","Saints")
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
e[,"away.team"] <- c("Ravens","Steelers","Falcons","Saints")
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
e[,"away.team"] <- c("Ravens","Steelers","Falcons","Saints")
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
e[,"away.team"] <- c("Ravens","Steelers","Falcons","Saints")
e
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
# make the output look good
e <- head(d,4)
# e[,"home.team"] <- c("Browns","Bills","Chargers","Eagles")
# e[,"away.team"] <- c("Ravens","Steelers","Falcons","Saints")
e
head(d)
d %>% filter()
TRUE || FALSE
d1 <- d %>% filter(home.line.open == 3.5 || home.line.open == -3.5 || home.line.close == 3.5 || home.line.close == -3.5)
nrow(d1)
head(d1,4)
d %>% filter(home.line.open == 3.5)
d %>% filter(home.line.open == -3.5)
d %>% filter(home.line.open == -3.5, home.line.open == 3.5)
d %>% filter(home.line.open == -3.5 || home.line.open == 3.5)
d %>% filter(home.line.open == -3.5 | home.line.open == 3.5)
TRUE | TRUE
TRUE | FALSE
FALSE | FALSE
d1 <- d %>% filter(home.line.open == 3.5 | home.line.open == -3.5 | home.line.close == 3.5 | home.line.close == -3.5)
nrow(d1)
head(d1,4)
d1 <- d %>% filter(home.line.open == 3.5 | home.line.open == -3.5 | home.line.close == 3.5 | home.line.close == -3.5)
nrow(d1)
head(d1,8)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
head(d,5)
d1 <- d %>% filter(home.line.open == 3.5 | home.line.open == -3.5 | home.line.close == 3.5 | home.line.close == -3.5)
nrow(d1)
head(d1,5)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
head(df)
head(du)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df %>% mutate(home.margin = home.score - away.score)
d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
head(du)
d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
head(du)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(home.fave.covers = home.margin <  -3.5)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(home.fave.covers = home.margin >  -3.5)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(home.fave.covers = home.margin >  3.5)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(home.fave.covers = home.margin >  3.5)
du <- df %>% mutate(away.fave.covers = home.margin < -3.5)
head(du)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(home.fave.covers = home.margin >  3.5)
du <- du %>% mutate(away.fave.covers = home.margin < -3.5)
head(du)
head(du,13)
head(df)
head(du)
full_join(df,du)
help cbind
? cbind
cbind(df,du)
rbind(df,du)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5)
du <- du %>% mutate(fave.covers = home.margin < -3.5)
rbind(df,du)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5)
du <- du %>% mutate(fave.covers = home.margin < -3.5)
d2 <- rbind(df,du)
head(d2)
head(df)
d3 <- d2[order(date),]
d3 <- d2[order(d2$date),]
head(d3)
tail(d3)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # +3.5 home underdogs == away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5)
du <- du %>% mutate(fave.covers = home.margin < -3.5)
d2 <- rbind(df,du)
head(d2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5)
du <- du %>% mutate(fave.covers = home.margin < -3.5)
d2 <- rbind(df,du)
head(d2)
sum(d2$fave.covers)
sum(d2$fave.covers)/nrow(d2$fave.covers)
sum(d2$fave.covers)/length(d2$fave.covers)
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == -3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == 3)
d2 <- rbind(df,du)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
head(df)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
head(df)
head(df,20)
head(du)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
? order
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d$date, format="%yyyy-%mm-%dd")),]
head(d2,10)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d$date, format="%yyyy-%mm-%dd")),]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d$date, format="%YYYY-%mm-%dd")), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%YYYY-%mm-%dd")), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%Y-%m-%d")), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%y-%m-%d")), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%Y-%m-%d")), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%Y-%m-%d")), ]
tail(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[order(as.Date(d2$date, format="%Y-%m-%d")), ]
d2 <- d2 %>% map_df(rev)
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
d2 <- rbind(df,du)
d2 <- d2[ rev(order(as.Date(d2$date, format="%Y-%m-%d"))), ]
head(d2,20)
#d2 <- d2 %>%
round(sum(d2$fave.covers)/length(d2$fave.covers),2)
round(sum(d2$exactly.3)/length(d2$exactly.3),2)
tail(strsplit('this is a sentence',split=" ")[[1]],1)
h <- function(s) {
tail(strsplit(s,split=" ")[[1]],1)
}
h("this is pie")
extract.last.word <- function(s) {
tail(strsplit(s,split=" ")[[1]],1)
}
extract.last.word("tmp by bucs")
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
extract.last.word <- function(s) {
tail(strsplit(s,split=" ")[[1]],1)
}
d <- d %>% mutate(home.team = extract.last.word(home.team))
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
extract.last.word <- function(s) {
tail(strsplit(s,split=" ")[[1]],1)
}
d$home.team <- extract.last.word(d$home.team)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
extract.last.word <- function(s) {
tail(strsplit(s,split=" ")[[1]],1)
}
h <- function(v) {
result <- c()
for (s in v) {
result <- c(result, extract.last.word(s))
}
result
}
d$home.team <- h(d$home.team)
#d %>% mutate(home.team = extract.last.word(home.team))
#d <- d %>% mutate(home.team = extract.last.word(home.team))
#d <- d %>% mutate(away.team = extract.last.word(away.team))
head(d,5)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
extract.last.word <- function(v) {
result <- c()
for (s in v) {
result <- c(result, tail(strsplit(s,split=" ")[[1]],1))
}
result
}
d$home.team <- extract.last.word(d$home.team)
d$home.team <- extract.last.word(d$home.team)
head(d,5)
d <- read.csv("nfl.csv") %>% select("Date", "Home.Team", "Away.Team", "Home.Score", "Away.Score", "Home.Line.Open", "Home.Line.Close")
colnames(d) <- c("date","home.team","away.team","home.score","away.score","home.line.open", "home.line.close")
extract.last.word <- function(v) {
result <- c()
for (s in v) {
result <- c(result, tail(strsplit(s,split=" ")[[1]],1))
}
result
}
d$home.team <- extract.last.word(d$home.team)
d$away.team <- extract.last.word(d$away.team)
head(d,5)
head(d2)
head(d2,20)
d2[21:30,]
27*5
100/135-1
7/27
d <- d %>% mutate(home.margin = home.score - away.score)
df <- d %>% filter(home.line.open == -3.5 | home.line.close == -3.5) # -3.5 home favorites
du <- d %>% filter(home.line.open == 3.5 | home.line.close == 3.5 ) # -3.5 away favorites
df <- df %>% mutate(fave.covers = home.margin >  3.5) %>% mutate(exactly.3 = home.margin == 3)
du <- du %>% mutate(fave.covers = home.margin < -3.5) %>% mutate(exactly.3 = home.margin == -3)
# new dataset
d2 <- rbind(df,du)
d2 <- d2[ rev(order(as.Date(d2$date, format="%Y-%m-%d"))), ]
d2$home.margin <- NULL
d2$home.line.close <- NULL
head(d2,6)
# calculate p and q
p = round(sum(d2$fave.covers)/length(d2$fave.covers),2)
q = round(sum(d2$exactly.3)/length(d2$exactly.3),2)
235/5
135/5
47/7
47/9
260/2
160/2
260/4
160/4
65/5
40/5
13/8
100/160+1
100/160
5/8
